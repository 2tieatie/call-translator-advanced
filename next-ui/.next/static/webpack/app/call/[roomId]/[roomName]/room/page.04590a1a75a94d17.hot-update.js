"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/call/[roomId]/[roomName]/room/page",{

/***/ "(app-pages-browser)/./app/utils/utils.ts":
/*!****************************!*\
  !*** ./app/utils/utils.ts ***!
  \****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addVideoElement: function() { return /* binding */ addVideoElement; },\n/* harmony export */   copyToClipboard: function() { return /* binding */ copyToClipboard; },\n/* harmony export */   createRoom: function() { return /* binding */ createRoom; },\n/* harmony export */   decode: function() { return /* binding */ decode; },\n/* harmony export */   dragAndDrop: function() { return /* binding */ dragAndDrop; },\n/* harmony export */   generateAndSavePermanentId: function() { return /* binding */ generateAndSavePermanentId; },\n/* harmony export */   getLanguagesArray: function() { return /* binding */ getLanguagesArray; },\n/* harmony export */   getVideoObj: function() { return /* binding */ getVideoObj; },\n/* harmony export */   handleVideoMute: function() { return /* binding */ handleVideoMute; },\n/* harmony export */   makeVideoElement: function() { return /* binding */ makeVideoElement; },\n/* harmony export */   removeVideoElement: function() { return /* binding */ removeVideoElement; },\n/* harmony export */   setAudioMuteState: function() { return /* binding */ setAudioMuteState; },\n/* harmony export */   setVideoMuteState: function() { return /* binding */ setVideoMuteState; },\n/* harmony export */   startLocalVideo: function() { return /* binding */ startLocalVideo; }\n/* harmony export */ });\n/* harmony import */ var _utils_socketNetworkHandlers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/socketNetworkHandlers */ \"(app-pages-browser)/./app/utils/socketNetworkHandlers.ts\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst serverURL = \"http://127.0.0.1:5000/\";\nconst createRoom = async (roomName)=>{\n    try {\n        const response = await fetch(\"\".concat(serverURL, \"create_room\"), {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"room_name\": roomName\n            }\n        });\n        if (!response.ok) {\n            throw new Error(\"Failed to create room\");\n        }\n        const data = await response.json();\n        const roomId = data.room_id;\n        const createdRoomName = data.room_name;\n        return {\n            roomId,\n            roomName: createdRoomName\n        };\n    } catch (error) {\n        console.error(\"Error creating room:\", error);\n        return null;\n    }\n};\nconst getLanguagesArray = async ()=>{\n    const response = await fetch(\"\".concat(serverURL, \"/languages\"), {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n    if (!response.ok) {\n        throw new Error(\"Failed to load languages list\");\n    }\n    const data = await response.json();\n    return data.names.map((obj)=>Object.keys(obj)[0]);\n};\nconst decode = (value)=>{\n    if (Array.isArray(value)) {\n        return \"\";\n    }\n    return value ? decodeURIComponent(value) : \"\";\n};\nfunction makeVideoElement(elementId, displayName) {\n    const wrapperDiv = document.createElement(\"div\");\n    const vidWrapper = document.createElement(\"div\");\n    const vid = document.createElement(\"video\");\n    const nameText = document.createElement(\"h1\");\n    vid.volume = 0.05;\n    wrapperDiv.id = \"div_\".concat(elementId);\n    vid.id = \"vid_\".concat(elementId);\n    vid.className = \"remoteVideo rounded-lg shadow-md border border-gray-300 transition-shadow duration-500 ease-in-out\";\n    wrapperDiv.className = \"remoteVideo video-item\";\n    vidWrapper.className = \"vid-wrapper\";\n    vidWrapper.id = \"vidwr_\".concat(elementId);\n    nameText.className = \"display-name\";\n    wrapperDiv.style.backgroundColor = \"rgba(102, 177, 244, 0)\";\n    vidWrapper.style.backgroundColor = \"rgba(255, 255, 255, 0)\";\n    vid.autoplay = true;\n    nameText.innerText = displayName;\n    vidWrapper.appendChild(vid);\n    wrapperDiv.appendChild(vidWrapper);\n    wrapperDiv.appendChild(nameText);\n    return wrapperDiv;\n}\nfunction addVideoElement(elementId, displayName) {\n    removeVideoElement(elementId);\n    const videoGrid = document.getElementById(\"video_grid\");\n    if (videoGrid) {\n        videoGrid.appendChild(makeVideoElement(elementId, displayName));\n    // getParticipantsWithOtherLanguages();\n    } else {\n        console.log(\"No Video Grid\");\n    }\n}\nfunction removeVideoElement(elementId) {\n    const div = document.getElementById(\"div_\".concat(elementId));\n    if (!div) {\n        console.log(\"Video element not found\");\n        return;\n    }\n    const vid = getVideoObj(elementId);\n    if (vid) {\n        if (vid.srcObject) {\n            const tracks = vid.srcObject.getTracks();\n            tracks.forEach((track)=>track.stop());\n        }\n        vid.removeAttribute(\"srcObject\");\n        vid.removeAttribute(\"src\");\n    }\n    div.remove();\n}\nfunction getVideoObj(elementId) {\n    const videoObj = document.getElementById(\"vid_\".concat(elementId));\n    if (videoObj) {\n        return videoObj;\n    }\n    console.log(\"No videoObj vid_\" + elementId);\n    return null;\n}\nconst dragAndDrop = (element)=>{\n    const elementContainer = element.current;\n    if (elementContainer) {\n        let isDragging = false;\n        let dragStartX = 0;\n        let dragStartY = 0;\n        let dragStartLeft = 0;\n        let dragStartTop = 0;\n        const handleDragStart = (event)=>{\n            isDragging = true;\n            dragStartX = event.clientX;\n            dragStartY = event.clientY;\n            dragStartLeft = elementContainer.offsetLeft;\n            dragStartTop = elementContainer.offsetTop;\n        };\n        const handleDragMove = (event)=>{\n            if (!isDragging) return;\n            const deltaX = event.clientX - dragStartX;\n            const deltaY = event.clientY - dragStartY;\n            elementContainer.style.left = \"\".concat(dragStartLeft + deltaX, \"px\");\n            elementContainer.style.top = \"\".concat(dragStartTop + deltaY, \"px\");\n        };\n        const handleDragEnd = ()=>{\n            isDragging = false;\n        };\n        elementContainer.addEventListener(\"mousedown\", handleDragStart);\n        document.addEventListener(\"mousemove\", handleDragMove);\n        document.addEventListener(\"mouseup\", handleDragEnd);\n        return ()=>{\n            elementContainer.removeEventListener(\"mousedown\", handleDragStart);\n            document.removeEventListener(\"mousemove\", handleDragMove);\n            document.removeEventListener(\"mouseup\", handleDragEnd);\n        };\n    }\n};\nconst setAudioMuteState = (stream, muted)=>{\n    console.log(stream);\n    if (stream) {\n        if (\"getAudioTracks\" in stream) {\n            stream.getAudioTracks().forEach((track)=>{\n                track.enabled = !muted;\n                console.log(track.enabled);\n            });\n        }\n    }\n    return stream;\n};\nfunction stopVideoOnly(stream) {\n    stream.getVideoTracks().forEach((track)=>{\n        track.enabled = false;\n        setTimeout(()=>{\n            track.stop();\n            console.log(track);\n        }, 1);\n    });\n}\nfunction setVideoMuteState(videoRef, muted) {\n    let localStream = videoRef.srcObject;\n    if (!muted) {\n        console.log(123123);\n        stopVideoOnly(localStream);\n    } else {\n        navigator.mediaDevices.getUserMedia({\n            video: true\n        }).then((stream)=>{\n            videoRef.srcObject = stream;\n            (0,_utils_socketNetworkHandlers__WEBPACK_IMPORTED_MODULE_0__.updateRemotePeerConnections)(stream);\n        }).catch((error)=>{\n            console.error(\"Error accessing camera\", error);\n        });\n    }\n}\nlet uuidv4 = ()=>{\n    return \"10000000-1000-4000-8000-100000000000\".replace(/[018]/g, (c)=>(c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\n};\nconst generateAndSavePermanentId = ()=>{\n    const permanentId = localStorage.getItem(\"permanent_id\");\n    if (permanentId) {\n        console.log(\"Permanent ID already exists:\", permanentId);\n        return permanentId;\n    } else {\n        const newPermanentId = uuidv4();\n        localStorage.setItem(\"permanent_id\", newPermanentId);\n        console.log(\"New Permanent ID generated:\", newPermanentId);\n        return newPermanentId;\n    }\n};\nconst startLocalVideo = async (videoRef)=>{\n    try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n            video: true,\n            audio: true\n        });\n        if (videoRef.current) {\n            videoRef.current.srcObject = stream;\n            await new Promise((resolve)=>{\n                videoRef.current.onloadedmetadata = ()=>{\n                    resolve();\n                };\n            });\n        }\n    } catch (error) {\n        console.error(\"Error accessing media devices:\", error);\n    }\n};\nconst handleVideoMute = (videoMuted, videoRef)=>{\n    if (!videoMuted && videoRef.current && videoRef.current.srcObject instanceof MediaStream) {\n        const videoTracks = videoRef.current.srcObject.getVideoTracks();\n        videoTracks.forEach((track)=>{\n            track.enabled = false;\n            setTimeout(()=>{\n                track.stop();\n            }, 500);\n        });\n    } else {\n        startLocalVideo(videoRef).then(()=>{\n            setTimeout(()=>{\n                if (videoRef.current && videoRef.current.srcObject instanceof MediaStream) {\n                    (0,_utils_socketNetworkHandlers__WEBPACK_IMPORTED_MODULE_0__.updateRemotePeerConnections)(videoRef.current.srcObject);\n                }\n            }, 500);\n        });\n    }\n};\nasync function copyToClipboard(value) {\n    try {\n        await navigator.clipboard.writeText(value);\n    } catch (err) {\n        console.error(\"Error occurred:\", err);\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC91dGlscy91dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwRTtBQUNoRDtBQUUxQixNQUFNRSxZQUFZO0FBRVgsTUFBTUMsYUFBYSxPQUFPQztJQUMvQixJQUFJO1FBQ0YsTUFBTUMsV0FBVyxNQUFNQyxNQUFNLEdBQWEsT0FBVkosV0FBVSxnQkFBYztZQUN0REssUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsYUFBYUo7WUFDZjtRQUNGO1FBRUEsSUFBSSxDQUFDQyxTQUFTSSxFQUFFLEVBQUU7WUFDaEIsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsTUFBTUMsT0FBTyxNQUFNTixTQUFTTyxJQUFJO1FBQ2hDLE1BQU1DLFNBQVNGLEtBQUtHLE9BQU87UUFDM0IsTUFBTUMsa0JBQWtCSixLQUFLSyxTQUFTO1FBQ3RDLE9BQU87WUFBRUg7WUFBUVQsVUFBVVc7UUFBZ0I7SUFDN0MsRUFBRSxPQUFPRSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDLE9BQU87SUFDVDtBQUNGLEVBQUU7QUFHSyxNQUFNRSxvQkFBb0I7SUFDN0IsTUFBTWQsV0FBVyxNQUFNQyxNQUFNLEdBQWEsT0FBVkosV0FBVSxlQUFhO1FBQ3JESyxRQUFRO1FBQ1JDLFNBQVM7WUFDUCxnQkFBZ0I7UUFDbEI7SUFBQztJQUNILElBQUksQ0FBQ0gsU0FBU0ksRUFBRSxFQUFFO1FBQ2hCLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUVBLE1BQU1DLE9BQU8sTUFBTU4sU0FBU08sSUFBSTtJQUNoQyxPQUFPRCxLQUFLUyxLQUFLLENBQUNDLEdBQUcsQ0FBQyxDQUFDQyxNQUFZQyxPQUFPQyxJQUFJLENBQUNGLElBQUksQ0FBQyxFQUFFO0FBQzFELEVBQUM7QUFFTSxNQUFNRyxTQUFTLENBQUNDO0lBQ3JCLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0YsUUFBUTtRQUN4QixPQUFPO0lB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RixFQUFFLE9BQU90RyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO0lBQ2xEO0FBQ0YsRUFBRTtBQUNLLE1BQU13RyxrQkFBa0IsQ0FBQ0MsWUFBcUIzQjtJQUNuRCxJQUFJLENBQUMyQixjQUFjM0IsU0FBUzdCLE9BQU8sSUFBSTZCLFNBQVM3QixPQUFPLENBQUNaLFNBQVMsWUFBWXFFLGFBQWE7UUFDdEYsTUFBTUMsY0FBYzdCLFNBQVM3QixPQUFPLENBQUNaLFNBQVMsQ0FBQ3NDLGNBQWM7UUFDN0RnQyxZQUFZbkUsT0FBTyxDQUFDLENBQUNDO1lBQ25CQSxNQUFNZ0MsT0FBTyxHQUFHO1lBQ2hCRyxXQUFZO2dCQUNWbkMsTUFBTUMsSUFBSTtZQUNaLEdBQUc7UUFDTDtJQUNGLE9BQ0s7UUFDSHlELGdCQUFnQnJCLFVBQVVNLElBQUksQ0FBRTtZQUM5QlIsV0FBVztnQkFDUCxJQUFJRSxTQUFTN0IsT0FBTyxJQUFJNkIsU0FBUzdCLE9BQU8sQ0FBQ1osU0FBUyxZQUFZcUUsYUFBYTtvQkFDekUzSCx5RkFBMkJBLENBQUMrRixTQUFTN0IsT0FBTyxDQUFDWixTQUFTO2dCQUN4RDtZQUNGLEdBQUc7UUFDTDtJQUVKO0FBQ0osRUFBQztBQUVNLGVBQWV1RSxnQkFBZ0JuRyxLQUFhO0lBQ2pELElBQUk7UUFDRixNQUFNdUUsVUFBVTZCLFNBQVMsQ0FBQ0MsU0FBUyxDQUFDckc7SUFDdEMsRUFBRSxPQUFPc0csS0FBSztRQUNaOUcsUUFBUUQsS0FBSyxDQUFDLG1CQUFtQitHO0lBQ25DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vYXBwL3V0aWxzL3V0aWxzLnRzPzY5ZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt1cGRhdGVSZW1vdGVQZWVyQ29ubmVjdGlvbnN9IGZyb20gXCJAL3V0aWxzL3NvY2tldE5ldHdvcmtIYW5kbGVyc1wiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5jb25zdCBzZXJ2ZXJVUkwgPSAnaHR0cDovLzEyNy4wLjAuMTo1MDAwLydcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJvb20gPSBhc3luYyAocm9vbU5hbWU6IHN0cmluZyk6IFByb21pc2U8eyByb29tSWQ6IHN0cmluZzsgcm9vbU5hbWU6IHN0cmluZyB9IHwgbnVsbD4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7c2VydmVyVVJMfWNyZWF0ZV9yb29tYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdyb29tX25hbWUnOiByb29tTmFtZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgcm9vbScpO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3Qgcm9vbUlkID0gZGF0YS5yb29tX2lkO1xuICAgIGNvbnN0IGNyZWF0ZWRSb29tTmFtZSA9IGRhdGEucm9vbV9uYW1lO1xuICAgIHJldHVybiB7IHJvb21JZCwgcm9vbU5hbWU6IGNyZWF0ZWRSb29tTmFtZSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHJvb206JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRMYW5ndWFnZXNBcnJheSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3NlcnZlclVSTH0vbGFuZ3VhZ2VzYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH19KVxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgbGFuZ3VhZ2VzIGxpc3QnKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiBkYXRhLm5hbWVzLm1hcCgob2JqOiB7fSkgPT4gT2JqZWN0LmtleXMob2JqKVswXSlcbn1cblxuZXhwb3J0IGNvbnN0IGRlY29kZSA9ICh2YWx1ZTogc3RyaW5nIHwgbnVsbCB8IHN0cmluZ1tdKSA9PiB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICByZXR1cm4gdmFsdWUgPyBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpIDogJyc7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVZpZGVvRWxlbWVudChlbGVtZW50SWQ6IHN0cmluZywgZGlzcGxheU5hbWU6IHN0cmluZyk6IEhUTUxEaXZFbGVtZW50IHtcbiAgY29uc3Qgd3JhcHBlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNvbnN0IHZpZFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb25zdCB2aWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7XG4gIGNvbnN0IG5hbWVUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuICB2aWQudm9sdW1lID0gMC4wNTtcbiAgd3JhcHBlckRpdi5pZCA9IGBkaXZfJHtlbGVtZW50SWR9YDtcbiAgdmlkLmlkID0gYHZpZF8ke2VsZW1lbnRJZH1gO1xuICB2aWQuY2xhc3NOYW1lID0gXCJyZW1vdGVWaWRlbyByb3VuZGVkLWxnIHNoYWRvdy1tZCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHRyYW5zaXRpb24tc2hhZG93IGR1cmF0aW9uLTUwMCBlYXNlLWluLW91dFwiO1xuICB3cmFwcGVyRGl2LmNsYXNzTmFtZSA9IFwicmVtb3RlVmlkZW8gdmlkZW8taXRlbVwiO1xuICB2aWRXcmFwcGVyLmNsYXNzTmFtZSA9IFwidmlkLXdyYXBwZXJcIjtcbiAgdmlkV3JhcHBlci5pZCA9IGB2aWR3cl8ke2VsZW1lbnRJZH1gO1xuICBuYW1lVGV4dC5jbGFzc05hbWUgPSBcImRpc3BsYXktbmFtZVwiO1xuICB3cmFwcGVyRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgxMDIsIDE3NywgMjQ0LCAwKVwiO1xuICB2aWRXcmFwcGVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwKVwiO1xuICB2aWQuYXV0b3BsYXkgPSB0cnVlO1xuICBuYW1lVGV4dC5pbm5lclRleHQgPSBkaXNwbGF5TmFtZTtcblxuICB2aWRXcmFwcGVyLmFwcGVuZENoaWxkKHZpZCk7XG4gIHdyYXBwZXJEaXYuYXBwZW5kQ2hpbGQodmlkV3JhcHBlcik7XG4gIHdyYXBwZXJEaXYuYXBwZW5kQ2hpbGQobmFtZVRleHQpO1xuXG4gIHJldHVybiB3cmFwcGVyRGl2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkVmlkZW9FbGVtZW50KGVsZW1lbnRJZDogc3RyaW5nLCBkaXNwbGF5TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gIHJlbW92ZVZpZGVvRWxlbWVudChlbGVtZW50SWQpO1xuICBjb25zdCB2aWRlb0dyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvX2dyaWRcIik7XG4gIGlmICh2aWRlb0dyaWQpIHtcbiAgICB2aWRlb0dyaWQuYXBwZW5kQ2hpbGQobWFrZVZpZGVvRWxlbWVudChlbGVtZW50SWQsIGRpc3BsYXlOYW1lKSk7XG4gICAgLy8gZ2V0UGFydGljaXBhbnRzV2l0aE90aGVyTGFuZ3VhZ2VzKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coJ05vIFZpZGVvIEdyaWQnKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVWaWRlb0VsZW1lbnQoZWxlbWVudElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGRpdl8ke2VsZW1lbnRJZH1gKTtcbiAgaWYgKCFkaXYpIHtcbiAgICBjb25zb2xlLmxvZyhcIlZpZGVvIGVsZW1lbnQgbm90IGZvdW5kXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHZpZCA9IGdldFZpZGVvT2JqKGVsZW1lbnRJZCk7XG4gIGlmICh2aWQpIHtcbiAgICBpZiAodmlkLnNyY09iamVjdCkge1xuICAgICAgY29uc3QgdHJhY2tzID0gKHZpZC5zcmNPYmplY3QgYXMgTWVkaWFTdHJlYW0pLmdldFRyYWNrcygpO1xuICAgICAgdHJhY2tzLmZvckVhY2goKHRyYWNrKSA9PiB0cmFjay5zdG9wKCkpO1xuICAgIH1cbiAgICB2aWQucmVtb3ZlQXR0cmlidXRlKFwic3JjT2JqZWN0XCIpO1xuICAgIHZpZC5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNcIik7XG4gIH1cblxuICBkaXYucmVtb3ZlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWaWRlb09iaihlbGVtZW50SWQ6IHN0cmluZyk6IEhUTUxWaWRlb0VsZW1lbnQgfCBudWxsIHtcbiAgY29uc3QgdmlkZW9PYmogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgdmlkXyR7ZWxlbWVudElkfWApIGFzIEhUTUxWaWRlb0VsZW1lbnQgfCBudWxsO1xuICBpZiAodmlkZW9PYmopIHtcbiAgICByZXR1cm4gdmlkZW9PYmpcbiAgfVxuICBjb25zb2xlLmxvZygnTm8gdmlkZW9PYmogdmlkXycgKyBlbGVtZW50SWQpXG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBjb25zdCBkcmFnQW5kRHJvcCA9IChlbGVtZW50OiBhbnkpID0+IHtcbiAgICBjb25zdCBlbGVtZW50Q29udGFpbmVyID0gZWxlbWVudC5jdXJyZW50O1xuICAgIGlmIChlbGVtZW50Q29udGFpbmVyKSB7XG4gICAgICBsZXQgaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgbGV0IGRyYWdTdGFydFggPSAwO1xuICAgICAgbGV0IGRyYWdTdGFydFkgPSAwO1xuICAgICAgbGV0IGRyYWdTdGFydExlZnQgPSAwO1xuICAgICAgbGV0IGRyYWdTdGFydFRvcCA9IDA7XG5cbiAgICAgIGNvbnN0IGhhbmRsZURyYWdTdGFydCA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpc0RyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgZHJhZ1N0YXJ0WCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICAgIGRyYWdTdGFydFkgPSBldmVudC5jbGllbnRZO1xuICAgICAgICBkcmFnU3RhcnRMZWZ0ID0gZWxlbWVudENvbnRhaW5lci5vZmZzZXRMZWZ0O1xuICAgICAgICBkcmFnU3RhcnRUb3AgPSBlbGVtZW50Q29udGFpbmVyLm9mZnNldFRvcDtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGhhbmRsZURyYWdNb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuO1xuICAgICAgICBjb25zdCBkZWx0YVggPSBldmVudC5jbGllbnRYIC0gZHJhZ1N0YXJ0WDtcbiAgICAgICAgY29uc3QgZGVsdGFZID0gZXZlbnQuY2xpZW50WSAtIGRyYWdTdGFydFk7XG4gICAgICAgIGVsZW1lbnRDb250YWluZXIuc3R5bGUubGVmdCA9IGAke2RyYWdTdGFydExlZnQgKyBkZWx0YVh9cHhgO1xuICAgICAgICBlbGVtZW50Q29udGFpbmVyLnN0eWxlLnRvcCA9IGAke2RyYWdTdGFydFRvcCArIGRlbHRhWX1weGA7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBoYW5kbGVEcmFnRW5kID0gKCkgPT4ge1xuICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICB9O1xuXG4gICAgICBlbGVtZW50Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVEcmFnTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlRHJhZ0VuZCk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGVsZW1lbnRDb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlRHJhZ01vdmUpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlRHJhZ0VuZCk7XG4gICAgICB9O1xuICAgIH1cbn1cblxuXG5leHBvcnQgY29uc3Qgc2V0QXVkaW9NdXRlU3RhdGUgPSAoc3RyZWFtOiBNZWRpYVByb3ZpZGVyIHwgbnVsbCwgbXV0ZWQ6IGJvb2xlYW4pOiBNZWRpYVByb3ZpZGVyIHwgbnVsbCA9PiB7XG4gIGNvbnNvbGUubG9nKHN0cmVhbSlcbiAgaWYgKHN0cmVhbSkge1xuICAgIGlmIChcImdldEF1ZGlvVHJhY2tzXCIgaW4gc3RyZWFtKSB7XG4gICAgICBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICB0cmFjay5lbmFibGVkID0gIW11dGVkO1xuICAgICAgICBjb25zb2xlLmxvZyh0cmFjay5lbmFibGVkKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHJlYW07XG59O1xuXG5mdW5jdGlvbiBzdG9wVmlkZW9Pbmx5KHN0cmVhbTogeyBnZXRWaWRlb1RyYWNrczogKCkgPT4gYW55W107IH0pIHtcbiAgICBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICB0cmFjay5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codHJhY2spXG4gICAgICAgIH0sIDEpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0VmlkZW9NdXRlU3RhdGUodmlkZW9SZWY6IGFueSwgbXV0ZWQ6IGFueSkge1xuICAgIGxldCBsb2NhbFN0cmVhbSA9IHZpZGVvUmVmLnNyY09iamVjdFxuICAgIGlmICghbXV0ZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coMTIzMTIzKVxuICAgICAgICBzdG9wVmlkZW9Pbmx5KGxvY2FsU3RyZWFtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IHZpZGVvOiB0cnVlIH0pXG4gICAgICAgICAgICAudGhlbihzdHJlYW0gPT4ge1xuICAgICAgICAgICAgICAgIHZpZGVvUmVmLnNyY09iamVjdCA9IHN0cmVhbTtcbiAgICAgICAgICAgICAgICB1cGRhdGVSZW1vdGVQZWVyQ29ubmVjdGlvbnMoc3RyZWFtKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFjY2Vzc2luZyBjYW1lcmFcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufVxuXG5sZXQgdXVpZHY0ID0gKCkgPT4ge1xuICByZXR1cm4gXCIxMDAwMDAwMC0xMDAwLTQwMDAtODAwMC0xMDAwMDAwMDAwMDBcIi5yZXBsYWNlKC9bMDE4XS9nLCBjID0+XG4gICAgKGMgXiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmIDE1ID4+IGMgLyA0KS50b1N0cmluZygxNilcbiAgKTtcbn1cblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlQW5kU2F2ZVBlcm1hbmVudElkID0gKCkgPT4ge1xuICBjb25zdCBwZXJtYW5lbnRJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJtYW5lbnRfaWQnKTtcblxuICBpZiAocGVybWFuZW50SWQpIHtcbiAgICBjb25zb2xlLmxvZygnUGVybWFuZW50IElEIGFscmVhZHkgZXhpc3RzOicsIHBlcm1hbmVudElkKTtcbiAgICByZXR1cm4gcGVybWFuZW50SWRcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBuZXdQZXJtYW5lbnRJZCA9IHV1aWR2NCgpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJtYW5lbnRfaWQnLCBuZXdQZXJtYW5lbnRJZCk7XG4gICAgY29uc29sZS5sb2coJ05ldyBQZXJtYW5lbnQgSUQgZ2VuZXJhdGVkOicsIG5ld1Blcm1hbmVudElkKTtcbiAgICByZXR1cm4gbmV3UGVybWFuZW50SWRcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHN0YXJ0TG9jYWxWaWRlbyA9IGFzeW5jICh2aWRlb1JlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxWaWRlb0VsZW1lbnQ+KTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICB2aWRlbzogdHJ1ZSxcbiAgICAgICAgYXVkaW86IHRydWVcbiAgICB9KTtcbiAgICBpZiAodmlkZW9SZWYuY3VycmVudCkge1xuICAgICAgdmlkZW9SZWYuY3VycmVudC5zcmNPYmplY3QgPSBzdHJlYW07XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICB2aWRlb1JlZi5jdXJyZW50IS5vbmxvYWRlZG1ldGFkYXRhID0gKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhY2Nlc3NpbmcgbWVkaWEgZGV2aWNlczonLCBlcnJvcik7XG4gIH1cbn07XG5leHBvcnQgY29uc3QgaGFuZGxlVmlkZW9NdXRlID0gKHZpZGVvTXV0ZWQ6IGJvb2xlYW4sIHZpZGVvUmVmOiBhbnkpID0+IHtcbiAgaWYgKCF2aWRlb011dGVkICYmIHZpZGVvUmVmLmN1cnJlbnQgJiYgdmlkZW9SZWYuY3VycmVudC5zcmNPYmplY3QgaW5zdGFuY2VvZiBNZWRpYVN0cmVhbSkge1xuICAgICAgY29uc3QgdmlkZW9UcmFja3MgPSB2aWRlb1JlZi5jdXJyZW50LnNyY09iamVjdC5nZXRWaWRlb1RyYWNrcygpO1xuICAgICAgdmlkZW9UcmFja3MuZm9yRWFjaCgodHJhY2s6IHsgZW5hYmxlZDogYm9vbGVhbjsgc3RvcDogKCkgPT4gdm9pZDsgfSkgPT4ge1xuICAgICAgICB0cmFjay5lbmFibGVkID0gZmFsc2VcbiAgICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICAgIHRyYWNrLnN0b3AoKVxuICAgICAgICB9LCA1MDApXG4gICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdGFydExvY2FsVmlkZW8odmlkZW9SZWYpLnRoZW4oICgpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodmlkZW9SZWYuY3VycmVudCAmJiB2aWRlb1JlZi5jdXJyZW50LnNyY09iamVjdCBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZVJlbW90ZVBlZXJDb25uZWN0aW9ucyh2aWRlb1JlZi5jdXJyZW50LnNyY09iamVjdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCA1MDApXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb3B5VG9DbGlwYm9hcmQodmFsdWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHZhbHVlKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igb2NjdXJyZWQ6JywgZXJyKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJ1cGRhdGVSZW1vdGVQZWVyQ29ubmVjdGlvbnMiLCJSZWFjdCIsInNlcnZlclVSTCIsImNyZWF0ZVJvb20iLCJyb29tTmFtZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwib2siLCJFcnJvciIsImRhdGEiLCJqc29uIiwicm9vbUlkIiwicm9vbV9pZCIsImNyZWF0ZWRSb29tTmFtZSIsInJvb21fbmFtZSIsImVycm9yIiwiY29uc29sZSIsImdldExhbmd1YWdlc0FycmF5IiwibmFtZXMiLCJtYXAiLCJvYmoiLCJPYmplY3QiLCJrZXlzIiwiZGVjb2RlIiwidmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJtYWtlVmlkZW9FbGVtZW50IiwiZWxlbWVudElkIiwiZGlzcGxheU5hbWUiLCJ3cmFwcGVyRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidmlkV3JhcHBlciIsInZpZCIsIm5hbWVUZXh0Iiwidm9sdW1lIiwiaWQiLCJjbGFzc05hbWUiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImF1dG9wbGF5IiwiaW5uZXJUZXh0IiwiYXBwZW5kQ2hpbGQiLCJhZGRWaWRlb0VsZW1lbnQiLCJyZW1vdmVWaWRlb0VsZW1lbnQiLCJ2aWRlb0dyaWQiLCJnZXRFbGVtZW50QnlJZCIsImxvZyIsImRpdiIsImdldFZpZGVvT2JqIiwic3JjT2JqZWN0IiwidHJhY2tzIiwiZ2V0VHJhY2tzIiwiZm9yRWFjaCIsInRyYWNrIiwic3RvcCIsInJlbW92ZUF0dHJpYnV0ZSIsInJlbW92ZSIsInZpZGVvT2JqIiwiZHJhZ0FuZERyb3AiLCJlbGVtZW50IiwiZWxlbWVudENvbnRhaW5lciIsImN1cnJlbnQiLCJpc0RyYWdnaW5nIiwiZHJhZ1N0YXJ0WCIsImRyYWdTdGFydFkiLCJkcmFnU3RhcnRMZWZ0IiwiZHJhZ1N0YXJ0VG9wIiwiaGFuZGxlRHJhZ1N0YXJ0IiwiZXZlbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsIm9mZnNldExlZnQiLCJvZmZzZXRUb3AiLCJoYW5kbGVEcmFnTW92ZSIsImRlbHRhWCIsImRlbHRhWSIsImxlZnQiLCJ0b3AiLCJoYW5kbGVEcmFnRW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRBdWRpb011dGVTdGF0ZSIsInN0cmVhbSIsIm11dGVkIiwiZ2V0QXVkaW9UcmFja3MiLCJlbmFibGVkIiwic3RvcFZpZGVvT25seSIsImdldFZpZGVvVHJhY2tzIiwic2V0VGltZW91dCIsInNldFZpZGVvTXV0ZVN0YXRlIiwidmlkZW9SZWYiLCJsb2NhbFN0cmVhbSIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsInZpZGVvIiwidGhlbiIsImNhdGNoIiwidXVpZHY0IiwicmVwbGFjZSIsImMiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50OEFycmF5IiwidG9TdHJpbmciLCJnZW5lcmF0ZUFuZFNhdmVQZXJtYW5lbnRJZCIsInBlcm1hbmVudElkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIm5ld1Blcm1hbmVudElkIiwic2V0SXRlbSIsInN0YXJ0TG9jYWxWaWRlbyIsImF1ZGlvIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvbmxvYWRlZG1ldGFkYXRhIiwiaGFuZGxlVmlkZW9NdXRlIiwidmlkZW9NdXRlZCIsIk1lZGlhU3RyZWFtIiwidmlkZW9UcmFja3MiLCJjb3B5VG9DbGlwYm9hcmQiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJlcnIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/utils/utils.ts\n"));

/***/ })

});